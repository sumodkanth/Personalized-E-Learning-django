{% extends 'facultyindex.html' %}

{% block content %}
<head>
    <style>
    /* Additional CSS specific to this page */
    .video-list {
        padding-left: 250px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(30px, 1fr));
        gap: 20px; /* Adjust the gap between video items */
        margin-top: 30px;
    }

    .video-item {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        width: 400px;
        background-color: #f9f9f9;
    }

    .video-item h2 {
        font-size: 18px;
        margin-bottom: 10px;
    }

    .video-item video {
        width: 100%;
        border-radius: 6px;
    }

    .video-item p {
        margin-top: 10px;
    }

    .video-item p span {
        font-weight: bold;
    }

    /* Additional CSS to limit 3 videos per row */
    @media (min-width: 768px) {
        .video-list {
            grid-template-columns: repeat(3, 1fr);
        }
    }
                .comment {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .comment .user {
            font-weight: bold;
        }

        .comment .created-at {
            color: #777;
            font-size: 12px;
        }

        .comment .text {
            margin-top: 5px;
        }

        .comment-form textarea {
            width: 100%;
            height: 80px;
            margin-top: 10px;
            resize: none;
        }

        .comment-form input[type="submit"] {
            margin-top: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        .comment-form input[type="submit"]:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
<div>
    <div class="container">
    <h1>All Videos</h1>
    <div class="video-list">

        {% for video in videos %}
        <div class="video-item">


                    <video width="320" height="240" controls>
                        <source src="{{ video.video_file.url }}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <h2>{{ video.title }}</h2>
                     <p><span>Likes:</span> {{ video.likes.count }}</p>
                    {% for comment in video.comments.all %}
                        <p class="user">{{ comment.user.username }}</p>
                        <p class="text">{{ comment.text }}</p>
                        <!-- You can add more details about comments such as created_at, etc. -->
                    {% empty %}
                    <p>No comments yet.</p>
                    {% endfor %}
                    {% if user.is_authenticated and user.is_faculty %}

                            <h4>Reply to Comment</h4>
                            <form class="comment-form" method="post" action="{% url 'video_comments' video_id=video.id %}">
                                {% csrf_token %}
                                <textarea name="comment_text" rows="4" cols="50" placeholder="Add a comment..."></textarea><br>
                                <input type="submit" value="Post Comment">
                            </form>

                    {% endif %}


        </div>
        {% endfor %}

    </div>
    </div>
</div>
</body>
{% endblock %}
